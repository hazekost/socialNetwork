(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{12:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return u}));var r=n(59),a=n.n(r).a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"6c600c87-cd10-4399-80d8-d0a35356bfb5"}}),c={authMe:function(){return a.get("auth/me")},logIn:function(t,e,n){return a.post("auth/login",{email:t,password:e,rememberMe:n})},logOut:function(){return a.delete("auth/login")}},s={getProfile:function(t){return a.get("/profile/".concat(t))},getStatus:function(t){return a.get("profile/status/".concat(t))},updateMyStatus:function(t){return a.put("profile/status",{status:t})}},u={getUsers:function(t,e){return a.get("users?count=".concat(t,"&page=").concat(e))},follow:function(t){return a.post("follow/".concat(t))},unFollow:function(t){return a.delete("follow/".concat(t))}}},20:function(t,e,n){t.exports={nav:"NavBar_nav__2kycN",item:"NavBar_item__tJzuk",active:"NavBar_active__2nELW"}},24:function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return f})),n.d(e,"c",(function(){return p})),n.d(e,"d",(function(){return j}));var r=n(5),a=n.n(r),c=n(11),s=n(2),u=n(12),i="auth/SET_AUTH",o="auth/DEL_AUTH",l={id:null,login:null,email:null,isAuth:!1},d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case i:return Object(s.a)(Object(s.a)(Object(s.a)({},t),e.data),{},{isAuth:!0});case o:return Object(s.a)(Object(s.a)(Object(s.a)({},t),e.data),{},{isAuth:!1});default:return t}},f=function(){return function(){var t=Object(c.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.authMe();case 2:0===(n=t.sent).data.resultCode&&e((r=n.data.data,{type:i,data:r}));case 4:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()},p=function(t,e,n){return function(){var r=Object(c.a)(a.a.mark((function r(c){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u.a.logIn(t,e,n);case 2:0===r.sent.data.resultCode&&c(f());case 4:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()},j=function(){return function(){var t=Object(c.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.logOut();case 2:0===t.sent.data.resultCode&&e({type:o,data:{id:null,email:null,login:null}});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},41:function(t,e,n){t.exports={header:"Header_header__1GOQp",loginBlock:"Header_loginBlock__3Dydc"}},43:function(t,e,n){t.exports={myPost:"MyPost_myPost__1SoAL",posts:"MyPost_posts__2WlAZ"}},53:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(2),a=n(67),c=n(15),s=n(4),u=n(1),i=["isAuth"],o=function(t){return{isAuth:t.auth.isAuth}};function l(t){return Object(c.b)(o)((function(e){var n=e.isAuth,c=Object(a.a)(e,i);return n?Object(u.jsx)(t,Object(r.a)({},c)):Object(u.jsx)(s.a,{to:"/login"})}))}},54:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(37),a=n(1),c=function(t){var e=t.addItem,n=t.buttonName;return Object(a.jsx)(r.d,{initialValues:{text:""},onSubmit:function(t,n){""!==t.text.trim()&&e(t.text),t.text="",n.setSubmitting(!1)},children:function(t){return Object(a.jsxs)(r.c,{onSubmit:t.handleSubmit,children:[Object(a.jsx)(r.b,{onChange:t.handleChange,value:t.values.text,name:"text",component:"textarea",placeholder:"Enter your text"}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",children:n})})]})}})}},55:function(t,e,n){"use strict";e.a=n.p+"static/media/avatar.3911aaec.jpg"},56:function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return i}));var r=n(27),a=n(2),c="dialogs/ADD_MESSAGE",s={messages:[{message:"Hi",id:1},{message:"How are u",id:2},{message:"Sup",id:3}],dialogs:[{name:"Dimych",id:1},{name:"Valera",id:2},{name:"Vika",id:3},{name:"Sveta",id:4},{name:"Andrey",id:5}]},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,e=arguments.length>1?arguments[1]:void 0;return e.type===c?Object(a.a)(Object(a.a)({},t),{},{messages:[].concat(Object(r.a)(t.messages),[{message:e.message,id:4}])}):t},i=function(t){return{type:c,message:t}}},57:function(t,e,n){"use strict";n.d(e,"e",(function(){return h})),n.d(e,"b",(function(){return w})),n.d(e,"a",(function(){return S})),n.d(e,"c",(function(){return _})),n.d(e,"d",(function(){return P}));var r=n(5),a=n.n(r),c=n(11),s=n(27),u=n(2),i=n(12),o="users/SET_USERS",l="users/SET_CURRENT_PAGE",d="users/TOGGLE_FETCH",f="users/FOLLOW",p="users/UNFOLLOW",j="users/TOGGLE_FOLLOWING",b={items:[],totalCount:0,error:"",pageSize:10,currentPage:1,isFetching:!1,followingInProgress:[]},h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case o:return Object(u.a)(Object(u.a)({},t),e.data);case l:return Object(u.a)(Object(u.a)({},t),{},{currentPage:e.page});case d:return Object(u.a)(Object(u.a)({},t),{},{isFetching:e.isFetching});case f:return Object(u.a)(Object(u.a)({},t),{},{items:t.items.map((function(t){return t.id===e.id?Object(u.a)(Object(u.a)({},t),{},{followed:!0}):t}))});case p:return Object(u.a)(Object(u.a)({},t),{},{items:t.items.map((function(t){return t.id===e.id?Object(u.a)(Object(u.a)({},t),{},{followed:!1}):t}))});case j:return Object(u.a)(Object(u.a)({},t),{},{followingInProgress:e.isFetching?[].concat(Object(s.a)(t.followingInProgress),[e.id]):t.followingInProgress.filter((function(t){return t!==e.id}))});default:return t}},O=function(t){return{type:f,id:t}},g=function(t){return{type:p,id:t}},v=function(t){return{type:o,data:t}},m=function(t){return{type:l,page:t}},x=function(t){return{type:d,isFetching:t}},y=function(t,e){return{type:j,id:t,isFetching:e}},w=function(t,e){return function(){var n=Object(c.a)(a.a.mark((function n(r){var c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(x(!0)),n.next=3,i.c.getUsers(t,e);case 3:c=n.sent,r(v(c.data)),r(x(!1));case 6:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},S=function(t,e){return function(){var n=Object(c.a)(a.a.mark((function n(r){var c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(x(!0)),r(m(e)),n.next=4,i.c.getUsers(t,e);case 4:c=n.sent,r(v(c.data)),r(x(!1));case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},_=function(t){return function(){var e=Object(c.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(y(t,!0)),e.next=3,i.c.follow(t);case 3:0===e.sent.data.resultCode&&n(O(t)),n(y(t,!1));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},P=function(t){return function(){var e=Object(c.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(y(t,!0)),e.next=3,i.c.unFollow(t);case 3:0===e.sent.data.resultCode&&n(g(t)),n(y(t,!1));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},58:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n.p+"static/media/preloader.07a3b34f.gif",a=n(1),c=function(){return Object(a.jsx)("img",{style:{width:"100px",marginLeft:"40%"},src:r,alt:""})}},61:function(t,e,n){t.exports={post:"Post_post__1nWDH"}},64:function(t,e,n){},65:function(t,e,n){t.exports={description:"ProfileInfo_description__30zCW"}},72:function(t,e,n){},76:function(t,e,n){},98:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),c=n(32),s=n.n(c),u=function(t){t&&t instanceof Function&&n.e(6).then(n.bind(null,105)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,s=e.getTTFB;n(t),r(t),a(t),c(t),s(t)}))},i=(n(72),n(21)),o=n(22),l=n(26),d=n(25),f=n(15),p=n(4),j=(n(76),n(58)),b=n(24),h=n(16),O=n(41),g=n.n(O),v=n(1);function m(t){return Object(v.jsxs)("header",{className:g.a.header,children:[Object(v.jsx)("img",{src:"https://coollogo.net/wp-content/uploads/2021/03/React-logo.svg",alt:""}),Object(v.jsx)("div",{className:g.a.loginBlock,children:t.isAuth?Object(v.jsxs)("div",{children:[t.login," - ",Object(v.jsx)("button",{onClick:t.logout,children:"Log Out"})]}):Object(v.jsx)(h.b,{to:"/login",children:"Login"})})]})}var x=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).logout=function(){t.props.logout()},t}return Object(o.a)(n,[{key:"render",value:function(){var t=this.props,e=t.login,n=t.isAuth;return Object(v.jsx)(m,{isAuth:n,login:e,logout:this.logout})}}]),n}(a.a.Component),y=Object(f.b)((function(t){return{isAuth:t.auth.isAuth,login:t.auth.login}}),{logout:b.d})(x),w=n(20),S=n.n(w),_=function(){return Object(v.jsxs)("nav",{className:S.a.nav,children:[Object(v.jsx)("div",{className:S.a.item,children:Object(v.jsx)(h.b,{to:"/profile",activeClassName:S.a.active,children:"Profile"})}),Object(v.jsx)("div",{className:S.a.item,children:Object(v.jsx)(h.b,{to:"/messages",activeClassName:S.a.active,children:"Mesages"})}),Object(v.jsx)("div",{className:S.a.item,children:Object(v.jsx)(h.b,{to:"/users",activeClassName:S.a.active,children:"Users"})})]})},P=n(28),k=n(53),C=n(5),A=n.n(C),N=n(11),E=n(27),L=n(2),T=n(12),I="profile/ADD_POST",F="profile/SET_USER_PROFILE",U="profile/SET_USER_STATUS",M={posts:[{post:"Hi, how are you",id:1,likesCount:21},{post:"How your it-kamasutra",id:2,likesCount:15}],userProfile:null,userStatus:""},z=function(t){return{type:U,status:t}},D=n(61),H=n.n(D);function B(t){return Object(v.jsxs)("div",{className:H.a.post,children:[Object(v.jsx)("img",{src:"https://icon-library.com/images/avatar-icon-png/avatar-icon-png-15.jpg",alt:""}),t.value,Object(v.jsx)("div",{children:Object(v.jsxs)("span",{children:["Like: ",t.likesCount]})})]})}var G=n(43),R=n.n(G),W=n(54),J=a.a.memo((function(t){var e=t.state,n=t.addPost;return Object(v.jsxs)("div",{className:R.a.myPost,children:[Object(v.jsx)(W.a,{addItem:n,buttonName:"Add post"}),Object(v.jsx)("div",{className:R.a.posts,children:e.posts.map((function(t){return Object(v.jsx)(B,{value:t.post,likesCount:t.likesCount},t.id)}))})]})})),V=n(64),K=n.n(V),Q=n(65),Y=n.n(Q),Z=n(55),q=n(40),X=function(t){var e=Object(r.useState)(!1),n=Object(q.a)(e,2),a=n[0],c=n[1],s=Object(r.useState)(t.status),u=Object(q.a)(s,2),i=u[0],o=u[1];Object(r.useEffect)((function(){o(t.status)}),[t.status]);return Object(v.jsx)(v.Fragment,{children:a?Object(v.jsx)("div",{children:Object(v.jsx)("input",{autoFocus:!0,onChange:function(t){o(t.currentTarget.value)},onBlur:function(){c(!1),t.updateMyStatus(i)},value:i})}):Object(v.jsx)("div",{onDoubleClick:function(){c(!0)},children:t.status})})};function $(t){var e,n;return Object(v.jsxs)("div",{className:Y.a.description,children:[Object(v.jsx)("img",{src:(null===(e=t.userProfile)||void 0===e?void 0:e.photos.large)?t.userProfile.photos.large:Z.a,alt:""}),Object(v.jsx)("span",{children:null===(n=t.userProfile)||void 0===n?void 0:n.fullName}),Object(v.jsx)(X,{status:t.userStatus,updateMyStatus:t.updateMyStatus})]})}var tt=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=this.props.match.params.userId;t||(t=String(this.props.authUserId)),this.props.getUserProfile(t),this.props.getUserStatus(t)}},{key:"render",value:function(){var t=this.props.state,e=t.userProfile,n=t.userStatus;return Object(v.jsxs)("div",{className:K.a.profile,children:[Object(v.jsx)($,{userProfile:e,userStatus:n,updateMyStatus:this.props.updateMyStatus}),Object(v.jsx)(J,{state:this.props.state,addPost:this.props.addPost})]})}}]),n}(a.a.Component),et=Object(P.c)(Object(f.b)((function(t){return{state:t.profilePage,authUserId:t.auth.id}}),{addPost:function(t){return{type:I,text:t}},getUserProfile:function(t){return function(){var e=Object(N.a)(A.a.mark((function e(n){var r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.b.getProfile(t);case 2:r=e.sent,n((a=r.data,{type:F,profile:a}));case 4:case"end":return e.stop()}var a}),e)})));return function(t){return e.apply(this,arguments)}}()},getUserStatus:function(t){return function(){var e=Object(N.a)(A.a.mark((function e(n){var r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.b.getStatus(t);case 2:r=e.sent,n(z(r.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},updateMyStatus:function(t){return function(){var e=Object(N.a)(A.a.mark((function e(n){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.b.updateMyStatus(t);case 2:0===e.sent.data.resultCode&&n(z(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),p.f,k.a)(tt);function nt(t){return function(e){return Object(v.jsx)(r.Suspense,{fallback:"...Loading",children:Object(v.jsx)(t,Object(L.a)({},e))})}}var rt="app/SET_INIT",at={initialized:!1},ct=a.a.lazy((function(){return n.e(3).then(n.bind(null,107))})),st=a.a.lazy((function(){return n.e(4).then(n.bind(null,108))})),ut=a.a.lazy((function(){return n.e(5).then(n.bind(null,106))})),it=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeAppTC()}},{key:"render",value:function(){return this.props.initialized?Object(v.jsxs)("div",{className:"app-wrapper",children:[Object(v.jsx)(y,{}),Object(v.jsx)(_,{}),Object(v.jsxs)("div",{className:"content",children:[Object(v.jsx)(p.b,{path:"/messages",render:function(){return Object(v.jsx)(r.Suspense,{fallback:"...Loading",children:Object(v.jsx)(ct,{})})}}),Object(v.jsx)(p.b,{path:"/profile/:userId?",render:function(){return Object(v.jsx)(et,{})}}),Object(v.jsx)(p.b,{path:"/users",render:nt(st)}),Object(v.jsx)(p.b,{path:"/login",render:nt(ut)})]})]}):Object(v.jsx)(j.a,{})}}]),n}(a.a.Component),ot=Object(f.b)((function(t){return{initialized:t.app.initialized}}),{initializeAppTC:function(){return function(t){t(Object(b.b)()).then((function(){t({type:rt})}))}}})(it),lt=n(66),dt=n(56),ft=n(57),pt=Object(P.b)({messagesPage:dt.b,profilePage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case I:return Object(L.a)(Object(L.a)({},t),{},{posts:[].concat(Object(E.a)(t.posts),[{id:4,post:e.text,likesCount:0}])});case F:return Object(L.a)(Object(L.a)({},t),{},{userProfile:e.profile});case U:return Object(L.a)(Object(L.a)({},t),{},{userStatus:e.status});default:return t}},usersPage:ft.e,auth:b.a,app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,e=arguments.length>1?arguments[1]:void 0;return e.type===rt?Object(L.a)(Object(L.a)({},t),{},{initialized:!0}):t}}),jt=Object(P.d)(pt,Object(P.a)(lt.a));window.store=jt,s.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(h.a,{children:Object(v.jsx)(f.a,{store:jt,children:Object(v.jsx)(ot,{})})})}),document.getElementById("root")),u()}},[[98,1,2]]]);
//# sourceMappingURL=main.82475814.chunk.js.map